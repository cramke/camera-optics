<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/src/styles.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Camera Optics Calculator</title>
    <script type="module" src="/src/main.ts" defer></script>
  </head>

  <body>
    <div class="app-container">
      <header>
        <h1>ðŸ“· Camera Optics Calculator</h1>
        <p class="subtitle">Calculate FOV and spatial resolution for camera systems</p>
      </header>

      <div class="main-content">
        <!-- Left Panel: Camera Systems -->
        <div class="panel systems-panel">
          <h2>Camera Systems</h2>
          
          <div class="camera-form">
            <div class="form-group">
              <label for="name">Name (optional)</label>
              <input type="text" id="name" placeholder="e.g., Full Frame 50mm" />
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="sensor-width">Sensor Width (mm)</label>
                <input type="number" id="sensor-width" value="36" step="0.1" />
              </div>
              <div class="form-group">
                <label for="sensor-height">Sensor Height (mm)</label>
                <input type="number" id="sensor-height" value="24" step="0.1" />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="pixel-width">Pixel Width</label>
                <input type="number" id="pixel-width" value="6000" step="1" />
              </div>
              <div class="form-group">
                <label for="pixel-height">Pixel Height</label>
                <input type="number" id="pixel-height" value="4000" step="1" />
              </div>
            </div>

            <div class="form-group">
              <label for="focal-length">Focal Length (mm)</label>
              <input type="number" id="focal-length" value="50" step="0.1" />
            </div>

            <div class="alternative-input">
              <label>Or calculate from FOV:</label>
              <div class="form-row">
                <div class="form-group">
                  <label for="hfov-deg">Horizontal FOV (Â°)</label>
                  <input type="number" id="hfov-deg" placeholder="e.g., 39.6" step="0.1" />
                </div>
                <div class="form-group">
                  <label for="vfov-deg">Vertical FOV (Â°)</label>
                  <input type="number" id="vfov-deg" placeholder="e.g., 27" step="0.1" />
                </div>
              </div>
              <button type="button" id="calc-focal-btn" class="calc-btn">Calculate Focal Length</button>
            </div>

            <div class="form-group">
              <label for="distance">Working Distance (m)</label>
              <input type="number" id="distance" value="5" step="0.1" />
            </div>

            <div class="button-row">
              <button id="add-system-btn" class="secondary-btn full-width">Add to Comparison</button>
            </div>
          </div>

          <div class="presets">
            <h3>Quick Presets</h3>
            <button class="preset-btn" data-preset="full-frame">Full Frame</button>
            <button class="preset-btn" data-preset="aps-c">APS-C</button>
            <button class="preset-btn" data-preset="micro43">Micro 4/3</button>
          </div>

          <div id="systems-list" class="systems-list">
            <h3>Comparison List</h3>
            <div id="systems-items"></div>
          </div>
        </div>

        <!-- Right Panel: Visualization & Results -->
        <div class="panel results-panel">
          <div class="tabs">
            <button class="tab-btn active" data-tab="visualization">Visualization</button>
            <button class="tab-btn" data-tab="results">Results</button>
          </div>

          <div id="visualization-tab" class="tab-content active">
            <div class="canvas-container">
              <canvas id="fov-canvas" width="600" height="600"></canvas>
              <div id="canvas-legend" class="legend"></div>
            </div>
            <div class="reference-objects">
              <label for="ref-object-select">Reference Object:</label>
              <select id="ref-object-select">
                <!-- Options populated dynamically from TypeScript -->
              </select>
            </div>
          </div>

          <div id="results-tab" class="tab-content">
            <div id="results-output"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast notification container -->
    <div id="toast-container"></div>
  </body>
</html>
